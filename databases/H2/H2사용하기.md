# [H2] h2 ì„¤ì¹˜ ë° ì‚¬ìš©í•˜ê¸°

> h2ë¥¼ ìì£¼ ì‚¬ìš©í•˜ì§€ ì•Šì•„ ë‹¤ì‹œ ì„¤ì¹˜í•˜ê³  ì‚¬ìš©í•  ë•Œë§ˆë‹¤ ê²€ìƒ‰ì„ í•˜ê²Œ ë˜ì–´ ì‘ì„±í•´ ë³´ë ¤ í•©ë‹ˆë‹¤.
>
> ê°„ë‹¨í•œ ì„¤ì¹˜ ë°©ë²•ê³¼ ì‚¬ìš©ë²•ì„ ì‘ì„±í•´ ë³´ê² ìŠµë‹ˆë‹¤.

# H2 DB?

oracle, mysqlê³¼ ê°™ì€ relation DBì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ë‹¤ë¥¸ DBë“¤ê³¼ ë‹¬ë¦¬ ê°€ë³ê³  ì„¤ì¹˜ê°€ ì‰½ê³ , ê´€ë¦¬ê°€ í¸í•˜ê¸° ë•Œë¬¸ì— ê°€ë²¼ìš´ ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ë‚˜ í…ŒìŠ¤íŠ¸ ìš©ìœ¼ë¡œ ë§ì´ ì‚¬ìš©ë©ë‹ˆë‹¤.

## íŠ¹ì§•

> - ë¹ ë¥´ê³  ì˜¤í”ˆì†ŒìŠ¤ì¸ JDBC API
> - In Memory DB(ì¸ ë©”ëª¨ë¦¬ DB)*
> - Embedded mode(ë‚´ì¥ëª¨ë“œ) & Server mode(ì„œë²„ëª¨ë“œ) ì§€ì›
> - ë¸Œë¼ìš°ì € ê¸°ë°˜ ì½˜ì†” í”„ë¡œê·¸ë¨
> - 2MBì •ë„ì˜ ì ì€ ìš©ëŸ‰ìœ¼ë¡œ ì„¤ì¹˜ ê°€ëŠ¥
> - ANSI í‘œì¤€ SQLë¡œ ì—¬ëŸ¬ í˜¸í™˜ì„± ëª¨ë“œ ì§€ì›

### Embedded Mode vs Server Mode

#### Embedded mode(ë‚´ì¥ëª¨ë“œ) : Application ì„œë²„ ì‹¤í–‰ ì¢…ë£Œì‹œ ë°ì´í„° ëª¨ë‘ íœ˜ë°œë©ë‹ˆë‹¤.

- H2ë¥¼ Applicationê³¼ ë™ì¼í•œ JVMì„ ì´ìš©í•˜ì—¬ êµ¬ë™, Applicationì´ ì¢…ë£Œë˜ë©´ Dataê°€ ëª¨ë‘ ì†ì‹¤(íœ˜ë°œ) - ì˜ì†ì ì´ì§€ ì•ŠìŒ
- ë°ì´í„°ì˜ íœ˜ë°œì„±ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ì‹œ ìì£¼ ì‚¬ìš©

#### Server mode(ì„œë²„ëª¨ë“œ) : Application ì„œë²„ ì¢…ë£Œì‹œì—ë„ ì§€ì†ì ìœ¼ë¡œ í•´ë‹¹ ë°ì´í„°ë¥¼ ì‚¬ìš©
  - ë³„ë„ì˜ JVMì„ ì´ìš©í•˜ì—¬ êµ¬ë™ (localhost:9092) - ì˜ì†ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ
  - ì—¬ëŸ¬ Applicationì´ í•´ë‹¹ H2ì— ë™ì‹œ ì ‘ê·¼ ê°€ëŠ¥
  - Applicationê³¼ëŠ” TCP/IP í†µì‹ 
    - ë‚´ë¶€ì ìœ¼ë¡œëŠ” Embedded modeì™€ ë™ì¼í•œ ì‹¤í–‰ ë°©ì‹ì„ ê°–ì§€ë§Œ, TCP/IP í†µì‹ ìœ¼ë¡œ ì†ë„ê°€ ìƒëŒ€ì ìœ¼ë¡œ ëŠë¦¼



## ì„¤ì¹˜í•˜ê¸°(Mac)

- zip(or Windows)

https://www.h2database.com/html/download-archive.html

ìœ„ì˜ ê²½ë¡œì—ì„œ ì§ì ‘ ì›í•˜ëŠ”ë²„ì „ì˜ h2DBë¥¼ `Windows Installer` í˜¹ì€ `Platform-Independnt Zip` íŒŒì¼ì„ ë°›ì•„ ì„¤ì¹˜í•˜ì‹œë©´ ë©ë‹ˆë‹¤.



- Homebrew

https://formulae.brew.sh/formula/h2

Homebrewë¥¼ ì‚¬ìš©í•˜ì‹œë©´ terminalì—ì„œ ì•„ë˜ì˜ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•˜ë©´ ë©ë‹ˆë‹¤.

```zsh
brew install h2
```

*íŠ¹ì •ë²„ì „ì˜ h2ë¥¼ êµ³ì´ brewë¡œ ì„¤ì¹˜í•˜ê³  ì‹¶ë‹¤ë©´ [ì—¬ê¸°ì˜ ë§í¬](https://www.44bits.io/ko/post/install-specific-version-package-homebrew)ë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”(h2ëŠ” êµ¬ë²„ì „ì„ íŒ¨í‚¤ì§€ë³„ë¡œ êµ¬ë¶„í•˜ì§€ ì•Šì•„ brewë¡œ íŠ¹ì • ë²„ì „ ì„¤ì¹˜ ì‹œ ë‹¤ë¥¸ ë°©ë²•ì´ í•„ìš”í•©ë‹ˆë‹¤.)* 

- **ê²½ë¡œ ì°¾ê¸°**

ì•„ë˜ì™€ ê°™ì´ `where` commandë¡œ h2ì˜ ì„¤ì¹˜ ê²½ë¡œë¥¼ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![image-20220212151934757](/Users/eisen/Documents/Github/TIL/databases/H2/H2á„‰á…¡á„‹á…­á†¼á„’á…¡á„€á…µ.assets/image-20220212151934757.png)



## ì„¤ì •í•˜ê¸°

ìœ„ì—ì„œ ì°¾ì€ ê²½ë¡œë¡œ ë“¤ì–´ê°€ ê¶Œí•œì„ ì„¤ì •í•©ë‹ˆë‹¤.

![image-20220212152944343](/Users/eisen/Documents/Github/TIL/databases/H2/H2á„‰á…¡á„‹á…­á†¼á„’á…¡á„€á…µ.assets/image-20220212152944343.png)

```bash

// ì œ íŒŒì¼ ê²½ë¡œ ì˜ˆì‹œì…ë‹ˆë‹¤. í•´ë‹¹ ê²½ë¡œë¡œ ë“¤ì–´ê°„ í›„
âœ˜ eisenğŸ˜ î‚° ~/Documents/Github/TIL î‚° î‚  main Â±î‚°
cd /opt/homebrew/opt/h2/bin


// chmod 755ë¡œ ê¶Œí•œì„ ì„¤ì •í•©ë‹ˆë‹¤.
eisenğŸ˜ î‚° /opt/homebrew/opt/h2/bin î‚° î‚  stableî‚°
chmod 755 h2

// ì‹¤í–‰í•˜ê¸°
h2
```

ê·¸ í›„ `h2` ëª…ë ¹ìœ¼ë¡œ h2ë¥¼ ì‹¤í–‰ì‹œì¼œ ì¤ë‹ˆë‹¤.(ë²„ì „ì— ë”°ë¼ `h2.sh` commandë¥¼ ì‚¬ìš©í•˜ê¸°ë„ í•©ë‹ˆë‹¤.)



## DB ìƒì„± ë° h2 ì ‘ì†í•˜ê¸°

> Embeddedë¡œ dbë¥¼ ìƒì„± í•œ í›„ ì¬ì ‘ì†í•©ë‹ˆë‹¤.
>
> ê¶Œí•œ ë¬¸ì œ ë•Œë¬¸ì— tcpë¡œ ì ‘ê·¼í•˜ë©´, ë°ì´í„°ë² ì´ìŠ¤ê°€ ì—†ëŠ” ê²½ìš° ìë™ ìƒì„±í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
>
> [ì´ìœ ëŠ” ì—¬ê¸°ì˜ ë§í¬ë¥¼ ì°¸ê³ í•´ ì£¼ì„¸ìš”.](https://www.inflearn.com/questions/11283)

### DB ìƒì„±í•˜ê¸°

h2 ì‹¤í–‰ ì‹œ ì•„ë˜ì˜ ì´ë¯¸ì§€ì™€ ê°™ì€ í™”ë©´ì´ ëœ¹ë‹ˆë‹¤. ì´ ë•Œ `connect`ë¥¼ í•œë²ˆ ëˆŒëŸ¬ì£¼ì„¸ìš”.

http://www.h2database.com/html/tutorial.html#creating_new_databases

![image-20220210090130258](https://raw.githubusercontent.com/KrGil/TIL/main/databases/H2/H2%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0.assets/image-20220210090130258.png)

ê·¸ í›„ ì•„ë˜ì˜ ì´ë¯¸ì§€ì™€ ê°™ì´`Saved Settings`ì™€  `JDBC URL`  ë¶€ë¶„ì„ ìˆ˜ì •í•´ ì£¼ì„¸ìš”

> Generic H2 (Server)
>
> jdbc:h2:tcp://localhost/~/test

![image-20220212154001648](/Users/eisen/Documents/Github/TIL/databases/H2/H2á„‰á…¡á„‹á…­á†¼á„’á…¡á„€á…µ.assets/image-20220212154001648.png)

*ì €ëŠ” serverë¡œ ë°ì´í„°ê°€ íœ˜ë°œë˜ì§€ ì•ŠëŠ” ìš©ë„ë¡œ ì‚¬ìš©í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.*

ì•„ë˜ì™€ ê°™ì´ ì˜ ì ‘ì†ë˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![image-20220212154219249](/Users/eisen/Documents/Github/TIL/databases/H2/H2á„‰á…¡á„‹á…­á†¼á„’á…¡á„€á…µ.assets/image-20220212154219249.png)



## ë¬¸ì œ ë°œìƒ ì‹œ

h2ë¥¼ ì²˜ìŒ ì‹¤í–‰ ì‹œì¼°ì„ ê²½ìš° ìœ„ì˜ url ì£¼ì†Œë¥¼ í™•ì¸í•´ ë´…ë‹ˆë‹¤.

![image-20220210090417462](https://raw.githubusercontent.com/KrGil/TIL/main/databases/H2/H2%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0.assets/image-20220210090417462.png)

`192.168.0.234` ë¶€ë¶„ì„ `localhost`ë¡œ ë³€ê²½í•œ í›„ `connect` ë²„íŠ¼ì„ ëˆ„ë¦…ë‹ˆë‹¤.

![image-20220210090447221](https://raw.githubusercontent.com/KrGil/TIL/main/databases/H2/H2%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0.assets/image-20220210090447221.png)

> ì•„ë˜ì˜ ì´ë¯¸ì§€ì™€ ë™ì¼í•œì§€ í™•ì¸í•©ë‹ˆë‹¤.
>
> 1. urlì´ localhostë¡œ ë˜ì–´ ìˆëŠ”ì§€
> 2. Saved Settingsê°€ Generic H2(Embedded)ë¡œ ë˜ì–´ ìˆëŠ”ì§€

![image-20220210090512313](https://raw.githubusercontent.com/KrGil/TIL/main/databases/H2/H2%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0.assets/image-20220210090512313.png)

ëª¨ë‘ ê³ ìƒí•˜ì…¨ìŠµë‹ˆë‹¤. h2ë¥¼ í™œìš©í•œ ì¦ê±°ìš´ ì½”ë”© ë˜ì‹œê¸¸ ë°”ëë‹ˆë‹¤.



### References

https://jamie95.tistory.com/188

https://velog.io/@doobyeol/H2-DB

https://youngbae10000.tistory.com/51



https://www.inflearn.com/questions/11283

http://www.h2database.com/html/tutorial.html#creating_new_databases

